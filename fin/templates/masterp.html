{% extends "master.html" %}
{% load humanize %}
{% block content %}

<div class="container text-center d-flex justify-content-center">

       <ul class="pagination">

       {% if request.GET.q %}

              {% with q=request.GET.q %}

                     {% if page_obj.has_previous %}
                     
                            <li class="page-item"><a href="?page=1&q={{q}}" class="page-link">&laquo;</a></li>
                            <li class="page-item"><a href="?page={{ page_obj.previous_page_number }}&q={{q}}" class="page-link">&lsaquo;</a></li>

                     {% else %}
                     
                            <span class="page-link">&laquo;</span>
                            <span class="page-link">&lsaquo;</span>

                     {% endif %}

                     {% if page_obj.number|add:'-1' > 1 %}
              
                            <li class="page-item"><a class="page-link" href="?page={{ page_obj.number|add:'-2' }}&q={{q}}">&hellip;</a></li>

                     {% endif %}
              

                     {% for i in page_obj.paginator.page_range %}
                     
                            {% if page_obj.number == i %}

                                   <li class="active"><span class="page-link bg-primary text-white">{{ i }}</span></span></li>
                            
                            {% elif i > page_obj.number|add:'-2' and i < page_obj.number|add:'2' %}
                            
                                   <li><a class="page-link" href="?page={{ i }}&q={{q}}">{{ i }}</a></li>
                            
                            {% endif %}

                     {% endfor %}


                     {% if page_obj.paginator.num_pages > page_obj.number|add:'1' %}
                            
                            <li><a class="page-link" href="?page={{ page_obj.number|add:'2' }}&q={{q}}">&hellip;</a></li>
                     
                     {% endif %}

                     {% if page_obj.has_next %}
                            <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}&q={{q}}">&rsaquo;</a></li>

                            <li class="page-item"><a class="page-link" href="?page={{ page_obj.paginator.num_pages }}&q={{q}}">&raquo;</a></li>

                     {% else %}

                            <span class="page-link">&raquo;</span> 

                     {% endif %}

              {% endwith %}

       {% else %}

              {% if page_obj.has_previous %}
                     <li class="page-item"><a href="?page=1" class="page-link">&laquo;</a></li>
                     <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">&lsaquo;</a></li>

              {% else %}
                     <span class="page-link">&laquo;</span>
                     <span class="page-link">&lsaquo;</span>

              {% endif %}
              
              {% if page_obj.number|add:'-1' > 1 %}

                     <li class="page-item"><a class="page-link" href="?page={{ page_obj.number|add:'-2' }}">&hellip;</a></li>

              {% endif %}
              
              {% for i in page_obj.paginator.page_range %}

                     {% if page_obj.number == i %}

                            <li class="active"><span class="page-link bg-primary text-white">{{ i }}</span></span></li>
                     
                     {% elif i > page_obj.number|add:'-2' and i < page_obj.number|add:'2' %}
                     
                            <li><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
                     
                     {% endif %}

              {% endfor %}

              {% if page_obj.paginator.num_pages > page_obj.number|add:'1' %}
                     
                     <li class="page-item"><a class="page-link" href="?page={{ page_obj.number|add:'2' }}">&hellip;</a></li>
              
              {% endif %}

              {% if page_obj.has_next %}

                     <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">&rsaquo;</a></li>
                     <li class="page-item"><a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">&raquo;</a></li>


              {% else %}
              
                     <li class="page-item disabled"><span class="page-link">&rsaquo;</span>
                     <li class="page-item disabled"><span class="page-link">&raquo;</span>
              
              {% endif %}

       {% endif %}

       </ul>

</div>



{% block page_content %}
{% endblock %}

<div class="container text-center d-flex justify-content-center">

       <ul class="pagination">

       {% if request.GET.q %}

              {% with q=request.GET.q %}

                     {% if page_obj.has_previous %}
                     
                            <li class="page-item"><a href="?page=1&q={{q}}" class="page-link">&laquo;</a></li>
                            <li class="page-item"><a href="?page={{ page_obj.previous_page_number }}&q={{q}}" class="page-link">&lsaquo;</a></li>

                     {% else %}
                     
                            <span class="page-link">&laquo;</span>
                            <span class="page-link">&lsaquo;</span>

                     {% endif %}

                     {% if page_obj.number|add:'-1' > 1 %}

                            <li class="page-item"><a class="page-link" href="?page={{ page_obj.number|add:'-2' }}&q={{q}}">&hellip;</a></li>

                     {% endif %}
              

                     {% for i in page_obj.paginator.page_range %}
                     
                            {% if page_obj.number == i %}

                                   <li class="active"><span class="page-link bg-primary text-white">{{ i }}</span></span></li>
                            
                            {% elif i > page_obj.number|add:'-2' and i < page_obj.number|add:'2' %}
                            
                                   <li><a class="page-link" href="?page={{ i }}&q={{q}}">{{ i }}</a></li>
                            
                            {% endif %}

                     {% endfor %}


                     {% if page_obj.paginator.num_pages > page_obj.number|add:'1' %}
                            
                            <li><a class="page-link" href="?page={{ page_obj.number|add:'2' }}&q={{q}}">&hellip;</a></li>
                     
                     {% endif %}

                     {% if page_obj.has_next %}
                            <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}&q={{q}}">&rsaquo;</a></li>
                            <li class="page-item"><a class="page-link" href="?page={{ page_obj.paginator.num_pages }}&q={{q}}">&raquo;</a></li>

                     {% else %}

                            <span class="page-link">&raquo;</span> 

                     {% endif %}

              {% endwith %}

       {% else %}

              {% if page_obj.has_previous %}

                     <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">&lsaquo;</a></li>

              {% else %}

                     <span class="page-link">&lsaquo;</span>

              {% endif %}
              
              {% if page_obj.number|add:'-1' > 1 %}

                     <li class="page-item"><a class="page-link" href="?page={{ page_obj.number|add:'-2' }}">&hellip;</a></li>

              {% endif %}
              
              {% for i in page_obj.paginator.page_range %}

                     {% if page_obj.number == i %}

                            <li class="active"><span class="page-link bg-primary text-white">{{ i }}</span></span></li>
                     
                     {% elif i > page_obj.number|add:'-2' and i < page_obj.number|add:'2' %}
                     
                            <li><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
                     
                     {% endif %}

              {% endfor %}

              {% if page_obj.paginator.num_pages > page_obj.number|add:'1' %}
                     
                     <li class="page-item"><a class="page-link" href="?page={{ page_obj.number|add:'2' }}">&hellip;</a></li>
              
              {% endif %}

              {% if page_obj.has_next %}

                     <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">&rsaquo;</a></li>
                     <li class="page-item"><a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">&raquo;</a></li>


              {% else %}
              
                     <li class="page-item disabled"><span class="page-link">&rsaquo;</span>
                            <li class="page-item disabled"><span class="page-link">&raquo;</span>
              
              {% endif %}

       {% endif %}

       </ul>
</div>
{% endblock %}